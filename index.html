<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Climate Diagram Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <link rel="stylesheet" href="styles.css">

</head>

<div class="donate-floating">
    <script src="https://liberapay.com/scansot064/widgets/button.js"></script>
    <noscript>
        <a href="https://liberapay.com/scansot064/donate">
            <img alt="Donate using Liberapay" src="https://liberapay.com/assets/widgets/donate.svg">
        </a>
    </noscript>
</div>



<body>
    <div class="container">
        <div class="header">
            <h1>üå°Ô∏è Climate Diagram Generator</h1>
            <p>Select a city from 150,000+ locations worldwide</p>
        </div>

        <div class="main-content">
            <div class="input-panel">
                <div class="section-title">üìç Select Location</div>

                <div class="selector-group">
                    <label for="continentSelect">Continent</label>
                    <select id="continentSelect" onchange="loadContinent()">
                        <option value="">-- Select Continent --</option>
                        <option value="test">üß™ TEST (Fake Data)</option>
                        <option value="africa">Africa</option>
                        <option value="asia">Asia</option>
                        <option value="europe">Europe</option>
                        <option value="north-america">North America</option>
                        <option value="south-america">South America</option>
                        <option value="oceania">Oceania</option>
                        <option value="arctic">Arctic</option>
                        <option value="antarctic">Antarctic</option>
                    </select>
                    <div id="continentLoading" class="loading" style="display:none;">Loading...</div>
                </div>

                <div class="selector-group">
                    <label for="countrySelect">Country</label>
                    <select id="countrySelect" onchange="loadCountry()" disabled>
                        <option value="">-- Select Country --</option>
                    </select>
                </div>

                <div class="selector-group">
                    <label for="citySearch">City</label>
                    <div class="city-autocomplete-container">
                        <input type="text" id="citySearch" placeholder="Type to search cities..." disabled
                            autocomplete="off">
                        <div id="cityDropdown" class="city-dropdown"></div>
                    </div>
                    <input type="hidden" id="citySelect" value="">
                </div>

                <div id="locationInfo" class="info-display" style="display:none;">
                    <p><strong>Location:</strong> <span id="infoCity"></span></p>
                    <p><strong>Country:</strong> <span id="infoCountry"></span></p>
                    <p><strong>Coordinates:</strong> <span id="infoCoords"></span></p>
                </div>

                <div style="margin: 30px 0; text-align: center; color: #6c757d; font-weight: 600;">
                    ‚Äî OR ‚Äî
                </div>

                <div class="section-title">‚úèÔ∏è Input Your Own Data</div>

                <div class="selector-group">
                    <label for="manualCity">City/Place Name</label>
                    <input type="text" id="manualCity" placeholder="e.g., My Town">
                </div>

                <div class="selector-group">
                    <label for="manualCountry">Country/Region</label>
                    <input type="text" id="manualCountry" placeholder="e.g., My Country">
                </div>

                <div class="selector-group">
                    <label for="manualTemp">Temperatures (¬∞C)</label>
                    <input type="text" id="manualTemp"
                        placeholder="12 values: 10, 12, 15, 18, 22, 25, 28, 27, 24, 19, 14, 11">
                </div>

                <div class="selector-group">
                    <label for="manualPrecip">Precipitation (mm)</label>
                    <input type="text" id="manualPrecip"
                        placeholder="12 values: 65, 55, 50, 55, 70, 80, 60, 65, 75, 85, 80, 70">
                </div>

                <div class="selector-group">
                    <label>Hemisphere (for K√∂ppen classification)</label>
                    <div style="display: flex; gap: 20px; margin-top: 8px;">
                        <label style="cursor: pointer; display: flex; align-items: center;">
                            <input type="radio" name="manualHemisphere" value="north" style="margin-right: 8px;"
                                checked>
                            üåç Northern
                        </label>
                        <label style="cursor: pointer; display: flex; align-items: center;">
                            <input type="radio" name="manualHemisphere" value="south" style="margin-right: 8px;">
                            üåè Southern
                        </label>
                    </div>
                </div>

                <button onclick="generateManualDiagram()"
                    style="width: 100%; padding: 12px; background: #17a2b8; color: white; border: none; border-radius: 6px; font-size: 15px; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                    Generate Custom Diagram
                </button>

                <div style="margin: 30px 0; text-align: center; color: #6c757d; font-weight: 600;">
                    ‚Äî
                </div>

                <div class="section-title">üåç K√∂ppen Climate Classification</div>
                <p style="color: #6c757d; font-size: 0.9em; margin-bottom: 15px;">
                    Automatically classify the climate based on diagram data
                </p>
                <button onclick="classifyClimate()" id="classifyBtn"
                    style="width: 100%; padding: 12px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; border: none; border-radius: 6px; font-size: 15px; font-weight: 600; cursor: pointer; transition: all 0.3s; display: none;">
                    Classify Climate (K√∂ppen)
                </button>



                <div id="koppenResult"
                    style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 20px; border-radius: 8px; margin-top: 15px; display: none;">
                    <h3 style="margin-bottom: 10px;">Classification Result</h3>
                    <div id="koppenCode" style="font-size: 2.5em; font-weight: bold; margin: 15px 0;"></div>
                    <div id="koppenDesc"
                        style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 6px; line-height: 1.5;">
                    </div>
                </div>
            </div>

            <div class="chart-panel">
                <div class="chart-controls">
                    <label>Chart Height:</label>
                    <input type="range" id="heightSlider" min="400" max="1000" value="600" step="50"
                        oninput="updateChartHeight(this.value)">
                    <span class="height-value" id="heightValue">600px</span>
                </div>
                <div id="chartContainer">
                    <div class="welcome-message">
                        <p>üëà Select a city to view<br><strong>its climate diagram</strong></p>
                    </div>
                    <canvas id="climateChart" style="display: none;"></canvas>
                </div>
                <button class="btn-export" onclick="exportChart()" id="exportBtn" style="display: none;">
                    üíæ Export as PNG
                </button>
            </div>
        </div>
    </div>

    <script src="scripts.js"></script>

</body>

</html>